{"mappings":"AAAA,MAAMA,EAAQC,SAASC,cAAc,cAC/BC,EAAYF,SAASC,cAAc,kBAEzCF,EAAMI,iBAAiB,SA0CvB,WACE,IAAIC,EAAU,EAEd,IAAIF,EAAUG,UAAUC,SAAQC,GAAQA,EAAIC,YAAc,KAC1D,MAAMC,EAAW,IAAIP,EAAUG,UAAUK,KAAI,CAACC,EAAGC,KAAMC,OAsBlCC,EAtBgDF,EAuB9D,IAAIG,SAAQ,CAACC,EAAKC,KACvBC,YAAW,KACMC,KAAKC,SACP,GACXJ,EAAI,MAEDC,EAAC,KAAI,GAET,IAAOH,EAAM,IATpB,IAAuBA,CAtBkD,IACvEC,QAAQM,WAAWZ,GAAUa,MAAKC,IAChCA,EAAKjB,SAAQ,CAACkB,EAAMZ,KAClBM,YAAW,KACW,cAAhBM,EAAKC,SACPrB,GAAW,GAEbF,EAAUG,SAASO,GAAGJ,YAAcgB,EAAKE,OAASF,EAAKG,OACnDzB,EAAUG,SAASuB,OAAS,IAAMhB,GACpCM,YAAW,KACLd,IAAYF,EAAUG,SAASuB,QAAWxB,EAG5CyB,MAAM,cAFNA,MAAM,SAEa,GAEpB,IAAI,GAEJ,IAAJjB,EAAS,GACZ,G","sources":["src/js/05-promise.js"],"sourcesContent":["const start = document.querySelector('.js__start');\nconst container = document.querySelector('.js__container');\n\nstart.addEventListener('click', onStart);\n\n// function onStart() {\n//   // console.dir(container);\n//   const result = [];\n//   [...container.children].forEach(box => (box.textContent = ''));\n//   [...container.children].forEach((box, i) => {\n//     createPromise(i)\n//       .then(smile => {\n//         box.textContent = smile;\n//         result.push('1');\n//       })\n//       .catch(smile => (box.textContent = smile))\n//       .finally(() => {\n//         setTimeout(() => {\n//           if (i === container.children.length - 1) {\n//             if (!result.length || result === 3) {\n//               alert('Winner');\n//             } else {\n//               alert('Lost money');\n//             }\n//           }\n//         }, 500);\n//       });\n//   });\n// }\n\n// function createPromise(delay) {\n//   return new Promise((res, rej) => {\n//     setTimeout(() => {\n//       const random = Math.random();\n//       // const first = Math.floor(Math.random() * 10);\n//       // const arr = ['🤣', '😎', '😆'];\n//       if (random > 0.5) {\n//         res('🤑');\n//       } else {\n//         rej('😈');\n//       }\n//     }, 1000 * delay);\n//   });\n// }\n\nfunction onStart() {\n  let counter = 0;\n\n  [...container.children].forEach(box => (box.textContent = ''));\n  const promises = [...container.children].map((_, i) => createPromise(i));\n  Promise.allSettled(promises).then(item => {\n    item.forEach((item, i) => {\n      setTimeout(() => {\n        if (item.status === 'fulfilled') {\n          counter += 1;\n        }\n        container.children[i].textContent = item.value || item.reason;\n        if (container.children.length - 1 === i) {\n          setTimeout(() => {\n            if (counter === container.children.length || !counter) {\n              alert('Winner');\n            } else {\n              alert('Lost money');\n            }\n          }, 500);\n        }\n      }, i * 1000);\n    });\n  });\n}\n\nfunction createPromise(delay) {\n  return new Promise((res, rej) => {\n    setTimeout(() => {\n      const random = Math.random();\n      if (random > 0.5) {\n        res('🤑');\n      } else {\n        rej('😈');\n      }\n    }, 1000 * delay);\n  });\n}\n"],"names":["$f6119afd460449be$var$start","document","querySelector","$f6119afd460449be$var$container","addEventListener","counter","children","forEach","box","textContent","promises","map","_","i","$f6119afd460449be$var$createPromise","delay","Promise","res","rej","setTimeout","Math","random","allSettled","then","item1","item","status","value","reason","length","alert"],"version":3,"file":"05-promise.73b2f6e1.js.map"}